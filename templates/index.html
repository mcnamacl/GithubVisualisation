{% extends "layout.html" %}

{% block main %}

<script src="https://d3js.org/d3.v4.js"></script>

<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
<form action="/piecharts">
    <button type="submit" onclick="" style="float: right" class="btn"><i class="fa fa-home"></i> Home</button>
</form>

<div id="chord_chart"></div>

<script>

    // create the svg area
    var svg = d3.select("#chord_chart")
        .append("svg")
        .attr("width", 440)
        .attr("height", 440)
        .append("g")
        .attr("transform", "translate(220,220)")

    // create input data: a square matrix that provides flow between entities
    var matrix = [
        [0, 0, 5, 15], //X
        [0, 0, 15, 20], //Y
        [5, 15, 0, 0],  //B
        [15, 5, 0, 0] //A
    ];

    // give this matrix to d3.chord(): it will calculates all the info we need to draw arc and ribbon
    var res = d3.chord()
        .padAngle(0.05)     // padding between entities (black arc)
        .sortSubgroups(d3.descending)
        (matrix)

    // add the groups on the inner part of the circle
    svg
        .datum(res)
        .append("g")
        .selectAll("g")
        .data(function (d) { return d.groups; })
        .enter()
        .append("g")
        .append("path")
        .style("fill", "grey")
        .style("stroke", "black")
        .attr("d", d3.arc()
            .innerRadius(200)
            .outerRadius(210)
        )

    // Add the links between groups
    svg
        .datum(res)
        .append("g")
        .selectAll("path")
        .data(function (d) { return d; })
        .enter()
        .append("path")
        .attr("d", d3.ribbon()
            .radius(200)
        )
        .style("fill", "#69b3a2")
        .style("stroke", "black");

</script>

{% endblock %}